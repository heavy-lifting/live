import{I as M}from"./utils.BmXqTdNi.js";import{P as b,v,A as E}from"./index.Dkgbun3A.js";import"./useClient.C3xvyNXE.js";import"./preload-helper.BO48x9DZ.js";import"./_commonjsHelpers.BosuxZz1.js";import"./scope.M_6gkdev.js";import"./index.DIn8BZQ7.js";/* empty css                      */const y=144,S=128,w=176;b.prototype.midi=function(f){return this.onTrigger((x,s,u,d,p)=>{let{note:o,nrpnn:A,nrpv:O,ccn:i,ccv:e,velocity:n=.9,gain:l=1}=s.value;const g=E(p,u)+34;n=Math.floor(l*n*100);const h=Math.floor(s.duration.valueOf()/d*1e3-10),c=Math.round(g),m=(s.value.midichan??1)-1,a=f??"IAC",t=[];if(o!=null){const r=typeof o=="number"?o:v(o);t.push({requestedport:a,message:[y+m,r,n],offset:c}),t.push({requestedport:a,message:[S+m,r,n],offset:c+h})}if(e&&i){if(typeof e!="number"||e<0||e>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof i))throw new Error("expected ccn to be a number or a string");const r=Math.round(e*127);t.push({requestedport:a,message:[w+m,i,r],offset:c})}t.length&&setTimeout(()=>{M("sendmidi",{messagesfromjs:t})})})};
