import{j as z}from"./jsx-runtime.DDS51bD4.js";import"./index.DIn8BZQ7.js";const J=o=>{var i;if(typeof o!="string")return[];const[l,a="",u]=((i=o.match(/^([a-gA-G])([#bs]*)([0-9])?$/))==null?void 0:i.slice(1))||[];return l?[l,a,u?Number(u):void 0]:[]},K={"#":1,b:-1,s:1},b=o=>{if(typeof o=="number")return o;const[i,l,a]=J(o);if(!i)throw new Error('not a note: "'+o+'"');const u={c:0,d:2,e:4,f:5,g:7,a:9,b:11}[i.toLowerCase()],s=l?.split("").reduce((c,m)=>c+K[m],0)||0;return(Number(a)+1)*12+u+s};function P({options:o,onClick:i,onMouseDown:l,onMouseUp:a,onMouseLeave:u}){const{range:s=["A1","C6"],scaleX:c=1,scaleY:m=1,palette:v=["#39383D","#F2F2EF"],strokeWidth:f=1,stroke:H="black",upperWidth:U=14,upperHeight:w=100,lowerHeight:G=45,colorize:O=[],labels:R,topLabels:M}=o||{},k=[0,1,0,1,0,0,1,0,1,0,1,0],d=b(s[0]),S=b(s[1])-d+1,V=e=>{const t=[],n=[],h=b(e[1]);for(let p=d;p<=h;p++)(k[p%12]?n:t).push(p);return[t,n]},[X,Y]=V(s),r=U*c,y=e=>(e%12>4?7/4:5/3)*r,g=(w+G)*m,C=w*m,x=e=>Array.from({length:e-d},(t,n)=>n+d).reduce((t,n)=>k[n%12]?t:t+y(n),0),j=12-d%12,q=x(j+d)-j*r,L=e=>(e-d)*r+q,B=O.map(e=>({...e,keys:e.keys.map(t=>b(t))})),$=e=>{var t;return(t=B.find(({keys:n})=>n.includes(e)))==null?void 0:t.color},A=e=>()=>i?.(e),D=e=>()=>l?.(e),F=e=>()=>a?.(e),W=e=>()=>u?.(e),I=e=>k[e%12]===1;return{name:"svg",type:"element",value:"",attributes:{width:S*r+r+f*2,height:g},children:[...X.map(e=>{var t;return{name:"rect",type:"element",value:"",attributes:{key:e,x:x(e),y:0,height:g,width:y(e),fill:(t=$(e))!=null?t:v[1],stroke:H,strokeWidth:`${f}px`,onClick:A(e),onMouseDown:D(e),onMouseUp:F(e),onMouseLeave:W(e)}}}),...Y.map(e=>{var t;return{name:"rect",type:"element",value:"",attributes:{key:e,x:L(e),y:0,width:r,height:C,fill:(t=$(e))!=null?t:v[0],stroke:"black",strokeWidth:`${f}px`,onClick:A(e),onMouseDown:D(e),onMouseUp:F(e),onMouseLeave:W(e)}}}),...Object.entries(R||{}).reduce((e,[t,n])=>{const h=b(t),p=I(h),E=M?r*.7:(p?C:g)-r*.7,N=p||M?L(h)+r/2:x(h)+y(h)/2;return e.concat([{name:"circle",value:n,attributes:{cx:N,cy:E,r:r/2,fill:v[1],stroke:v[0]}},{name:"text",value:n,attributes:{x:N,y:E+r*.2,textAnchor:"middle",fontFamily:"Verdana",fontSize:r*.7}}])},[])]}}function Q({options:o,onClick:i,onMouseDown:l,onMouseUp:a,onMouseLeave:u}){const s=P({options:o,onClick:i,onMouseDown:l,onMouseUp:a,onMouseLeave:u});return z.jsx("svg",{...s.attributes,children:s.children.map((c,m)=>{const v=c.name;return z.jsx(v,{...c.attributes,children:c.value},`${c.name}-${m}`)})})}export{Q as C};
